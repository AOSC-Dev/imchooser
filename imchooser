# Usage: imchooser [ fcitx / ibus / scim ]

case $1 in
fcitx)
  echo "Selecting fcitx..."
  IM=fcitx
  ;;
ibus)
  echo "Selecting ibus..."
  IM=ibus
  ;;
scim)
  echo "Selecting scim..."
  IM=scim
  ;;
postinst)
  echo "post-installation configure (fcitx)..."
  IM=fcitx
  ;;
*)
  echo "Invalid choice!"
  exit 1
  ;;
esac

echo $1 | tee $HOME/.im > /dev/null

rm -f ~/.imchooser || true

IMCHOSEN=`cat ~/.im`

echo export GTK_IM_MODULE=$IMCHOSEN > ~/.xprofile
echo export GTK_IM_MODULE=$IMCHOSEN > ~/.xinitrc
echo export QT_IM_MODULE=$IMCHOSEN >> ~/.xprofile
echo export QT_IM_MODULE=$IMCHOSEN >> ~/.xinitrc
echo export QT5_IM_MODULE=$IMCHOSEN >> ~/.xprofile
echo export QT5_IM_MODULE=$IMCHOSEN >> ~/.xinitrc
echo export XMODIFIERS=@im=$IMCHOSEN >> ~/.xprofile
echo export XMODIFIERS=@im=$IMCHOSEN >> ~/.xinitrc
